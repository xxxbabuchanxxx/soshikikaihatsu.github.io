<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SSAP提案システム - ホーム</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- ヘッダー -->
        <header class="header">
            <div class="header-content">
                <h1 class="header-title">🚀 SSAP提案システム</h1>
                <p class="header-subtitle">みんなのアイデアで会社をより良く</p>
            </div>
        </header>

        <!-- メインコンテンツ -->
        <main class="main-content">
            <!-- 説明セクション -->
            <section class="info-section">
                <div class="info-card">
                    <h2>📝 SSAP提案システムとは？</h2>
                    <p>
                        社内の改善提案を投稿・共有し、従業員全員で投票できるシステムです。<br>
                        <strong>600票以上</strong>を獲得した提案は<strong class="highlight">実施候補</strong>に昇格します！
                    </p>
                </div>

                <div class="info-grid">
                    <div class="info-item">
                        <div class="info-icon">📋</div>
                        <h3>提案投稿</h3>
                        <p>業務改善や新しいアイデアを自由に投稿</p>
                    </div>
                    <div class="info-item">
                        <div class="info-icon">👍</div>
                        <h3>投票機能</h3>
                        <p>良いと思う提案にいいねで投票</p>
                    </div>
                    <div class="info-item">
                        <div class="info-icon">⏱️</div>
                        <h3>掲載期間</h3>
                        <p>提案は30日間掲載され自動で期限管理</p>
                    </div>
                    <div class="info-item">
                        <div class="info-icon">🎯</div>
                        <h3>実施候補</h3>
                        <p>600票以上で実施候補に昇格</p>
                    </div>
                </div>
            </section>

            <!-- アクションボタン -->
            <section class="action-section">
                <a href="submit.html" class="btn btn-primary btn-large">
                    <span class="btn-icon">✏️</span>
                    新しい提案を投稿する
                </a>
                <a href="proposals.html" class="btn btn-secondary btn-large">
                    <span class="btn-icon">📊</span>
                    提案一覧を見る
                </a>
            </section>

            <!-- 統計情報 -->
            <section class="stats-section">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="totalProposals">-</div>
                        <div class="stat-label">掲載中の提案</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="candidateProposals">-</div>
                        <div class="stat-label">実施候補</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">600</div>
                        <div class="stat-label">必要投票数</div>
                    </div>
                </div>
            </section>

            <!-- 使い方 -->
            <section class="howto-section">
                <h2>📖 使い方</h2>
                <div class="howto-steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h3>提案を投稿</h3>
                            <p>「新しい提案を投稿する」ボタンから、あなたのアイデアを投稿してください。</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h3>提案を閲覧</h3>
                            <p>「提案一覧を見る」から、他の従業員が投稿した提案を確認できます。</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h3>いいねで投票</h3>
                            <p>良いと思った提案に「いいね」ボタンで投票しましょう。</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <h3>実施候補へ</h3>
                            <p>600票以上を獲得した提案は、実施候補として検討されます。</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- フッター -->
        <footer class="footer">
            <p>&copy; 2026 SSAP提案システム | 組織開発課</p>
        </footer>
    </div>

    <script src="js/config.js"></script>
    <script src="js/api.js"></script>
    <script>
        // ページ読み込み時に統計情報を取得
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                const data = await getProposals();
                const proposals = data.proposals || [];
                
                // 掲載中の提案数
                const activeProposals = proposals.filter(p => p.status === '掲載中' || p.status === '実施候補');
                document.getElementById('totalProposals').textContent = activeProposals.length;
                
                // 実施候補数
                const candidates = proposals.filter(p => p.status === '実施候補');
                document.getElementById('candidateProposals').textContent = candidates.length;
            } catch (error) {
                console.error('統計情報の取得に失敗:', error);
                document.getElementById('totalProposals').textContent = '0';
                document.getElementById('candidateProposals').textContent = '0';
            }
        });
    </script>
</body>
</html>
